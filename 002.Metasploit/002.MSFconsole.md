# âš¡ **msfconsole**

* ğŸ”¹ It is the only supported way to access most of the features within Metasploit.
* ğŸ’» Provides a console-based interface to the framework.
* ğŸ§° Contains the most features and is the most stable MSF interface.
* âœ¨ Full readline support, tabbing, and command completion.
* âš™ï¸ Execution of external commands in `msfconsole` is possible.

---

## ğŸ› ï¸ **msfconsole usage and commands**

### ğŸ“ Shows the default installation path of the Metasploit Framework:

```bash
cd /usr/share/metasploit-framework/
```

### ğŸ“¦ Installs the Metasploit Framework using the package manager:

```bash
apt install metasploit-framework
```

### ğŸ˜ Starts and enables PostgreSQL service (required for MSF database features):

```bash
systemctl start postgresql.service
```
```bash
systemctl enable postgresql.service
```

### ğŸ” Verifies PostgreSQL is running on expected ports using `netstat` or `ss`:

```bash
netstat -nltup | grep postgres
```
```bash
ss -nltup | grep postgres
```

### ğŸ—„ï¸ Manages and initializes the Metasploit database using `msfdb`:

```bash
msfdb
msfdb init
```
---

## ğŸ“„ View Metasploit Database Configuration

Displays the Metasploit database configuration file, showing database names, users, and connection parameters.

```bash
cat /usr/share/metasploit-framework/config/database.yml
```

---

## ğŸ—„ï¸ **Database Configuration (database.yml)**

```yaml
development:
adapter: postgresql
database: msf
username: msf
password: OZVTON7Mp4p2nbVUMx4kVr6+XAKSLbTvdeEHD9nMiSEu=
host: localhost
port: 5432
pool: 5
timeout: 5

production:
adapter: postgresql
database: msf
username: msf
password: OZVTON7Mp4p2nbVUMx4kVr6+XAKSLbTvdeEHD9nMiSEu=
host: localhost
port: 5432
pool: 5
timeout: 5

test:
adapter: postgresql
database: msf_test
username: msf
password: OZVTON7Mp4p2nbVUMx4kVr6+XAKSLbTvdeEHD9nMiSEu=
host: localhost
port: 5432
pool: 5
timeout: 5
```

---

## â–¶ï¸ **Launching msfconsole**

### ğŸš€ Launch msfconsole in normal mode

```bash
msfconsole
```

### ğŸ¤« Launch msfconsole in quiet mode

```bash
msfconsole -q
```

### â“ Display msfconsole CLI help

```bash
msfconsole -h
```

---

## â— Getting Help Inside msfconsole

```bash
msf6 > ?
msf6 > help
```

â¡ï¸ Both commands display **help and a list of commands**.

---

## ğŸ“š Show Command â€” Listing Modules & Components

### ğŸ” Show help for the `show` command

```bash
msf6 > show -h
```

### ğŸ“¦ List all components

```bash
msf6 > show all
```

### ğŸ§¬ List all encoders

```bash
msf6 > show encoders
```

### ğŸ’¥ List all exploits

```bash
msf6 > show exploits
```

### ğŸ¯ List all payloads

```bash
msf6 > show payloads
```

---

## ğŸ” **Metasploit Search Command Examples**

### ğŸ“˜ Show help for the `search` command (long form)

```bash
help search
```

### ğŸ“™ Show help using the `-h` (help) option

```bash
search -h
```

---

## ğŸ” General Search Examples

### ğŸŸ¦ Search for all modules related to the **SMB protocol**

(any module whose name, description, or references contain *smb*)

```bash
search smb
```

### ğŸ·ï¸ Search modules whose **name** field contains â€œsmbâ€

```bash
search name:smb
```

---

## ğŸ¯ Search by Module Type

### ğŸ¤– Search specifically for **Meterpreter payloads**

```bash
search meterpreter type:payload
```

### ğŸ“¦ Search for **payloads related to SMB**

```bash
search smb type:payload
```

---

## ğŸ§© Search by Description, Author, and Check Support

### ğŸ§µ Search for modules whose description contains **sql**

(for SQL exploits, auxiliary modules, etc.)

```bash
search name:sql
```

### âœï¸ Search for modules written by **dookie**

```bash
search author:dookie
```

### âœ”ï¸ Search for modules that implement a **check** method

(check:Yes = supports pre-exploitation check)

```bash
search check:yes
```

### âœ”ï¸ Search for SMB-related modules that also support the **check** method

```bash
search smb check:Yes
```

---

## ğŸ¯ Selecting Exploit Modules

### ğŸ” Search for a specific exploit (example: MS08-067 NetAPI)

```bash
search ms08_067_netapi
```

### â–¶ï¸ Select exploit by index

```bash
use 0
```

### â–¶ï¸ Or select another index

```bash
use 8
```

### â†©ï¸ Return back to main msfconsole prompt

```bash
back
```

---

## ğŸ“Œ Select exploit module by full path

### ğŸ’¥ MS08-067 NetAPI exploit

```bash
use exploit/windows/smb/ms08_067_netapi
```

### ğŸ’¥ EternalBlue exploit (MS17-010)

```bash
use exploit/windows/smb/ms17_010_eternalblue
```

---


## ğŸ”§ Display Options & Module Information

Shows configurable settings and detailed information for the currently selected exploit module.

```bash
msf6 exploit(windows/smb/ms08_067_netapi) > show options
msf6 exploit(windows/smb/ms08_067_netapi) > show info
```

---

## ğŸ—„ï¸ Working With the Metasploit Database

### â“ Get help for database commands

```bash
help database
```

### ğŸ“Š Check the status of the database

```bash
db_status
```

### ğŸ”— Manually connect to a database

```bash
db_connect user:pass@127.0.0.1/metasploit3
```
---

## ğŸ§± **Workspaces in Metasploit**

Workspaces help separate different engagements or projects.

### ğŸ“˜ Workspace Commands

```bash
workspace -h
```
```bash
workspace -a armour
```
```bash
workspace -a infosec
```
```bash
workspace -d infosec
```
```bash
workspace armour
``````

---

## ğŸ” **Running Nmap from Metasploit (db_nmap)**

Runs Nmap scans directly from Metasploit and stores results in the database.

```bash
db_nmap -sn 192.168.1.1/24
```
```bash
db_nmap -v -sT -p- 192.168.1.31
```
```bash
db_nmap -v -sT -sV -p- -A 192.168.1.212
```

---

## ğŸ–¥ï¸ **Managing Hosts in the Database**

List, delete, name, annotate, and filter discovered hosts.

### ğŸ“‹ Host Commands

```bash
hosts
hosts -h
hosts -d 192.168.1.200
hosts -n kali 192.168.1.6
hosts -i "My kali" 192.168.1.6
hosts -m "Don't Scan" 192.168.1.6
hosts -c address
hosts -c address,os_name
hosts -a 192.168.1.200
hosts -S Windows
```

---

## ğŸ”§ **Viewing & Filtering Service Information**

Displays service information discovered during scans.

### ğŸ·ï¸ Service Commands

```bash
services
services -h
services -p 80
services -S apache
services -u
services -d 192.168.1.200
services -S Windows
```

---


## ğŸ”§ **View & Filter Service Information**

Commands to display and filter services discovered during scans:

```bash
services
services -h
services -p 80
services -p 445
services 192.168.1.31
services -c port,state
```

---

## ğŸ› ï¸ **Working With Exploits, Vulnerabilities, Scan Data & Sessions**

### ğŸ’¥ Use an exploit module

```bash
use exploit/windows/smb/ms08_067_netapi
```

### ğŸ§© View vulnerabilities

```bash
vulns
```

### ğŸ“¥ Import scan data (Nmap XML, etc.)

```bash
db_import /home/armour/vm/192.168.1.244/192.168.1.244_ver_sc.xml
```

### ğŸ“¤ Export scan data

```bash
db_export -h
db_export -f xml /home/armour/vm/msf_host.xml
```

### ğŸ” View stored credentials

```bash
creds
```

### ğŸ’ View collected loot

```bash
loot
```

---

## ğŸ–¥ï¸ **Managing Active Sessions**

### ğŸ“˜ Session help

```bash
sessions -h
```

### ğŸ“‹ List sessions

```bash
sessions -l
```

### ğŸ”Œ Interact with a session (example: session 1)

```bash
sessions -i 1
```

---
